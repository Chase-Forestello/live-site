<!-- Complete - JavaScript I - Key Events Exercise -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Konami Code</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="konami.css">
        <script src="https://kit.fontawesome.com/26f09e8c8b.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="wrapper">
            <canvas id="canvas"></canvas>
            <div id="hideController">
            <div class="cable"></div>
            <div class="controller">
                <div class="base">
                    <div class="front">
                        <div class="decoration">
                            <div class="stickers">
                                <div class="st-a">A</div>
                                <div class="st-b">B</div>
                                <div class="st-select">SELECT</div>
                                <div class="st-start">START</div>
                            </div>
                            <div class="decoration-central">
                                <div></div>
                                <div></div>
                                <div></div>
                                <div></div>
                                <div></div>
                            </div>

                        </div>
                        <div class="cross">
                            <div class="circle"></div>
                            <div class="vertical">
                                <div id="fakeArrowDown" class="arrowlf"></div>
                                <div id="fakeArrowUp" class="arrowrh"></div>
                            </div>
                            <div class="horizontal">
                                <div id="fakeArrowRight" class="arrowlf"></div>
                                <div id="fakeArrowLeft" class="arrowrh"></div>
                            </div>
                            <div class="back-cross">
                                <div class="horiz"></div>
                                <div class="vert"></div>
                            </div>
                        </div>
                        <div class="buttons-a-b">
                            <div class="btn-border"><div id="fakeB" class="btn-round a"></div></div>
                            <div class="btn-border"><div id="fakeA" class="btn-round b"></div></div>
                        </div>
                        <div class="buttons-select">
                            <div class="btn-central select"></div>
                            <div class="btn-central start"></div>
                        </div>
                    </div>
                </div>
            <h1 class="text-center">Konami Code?<span class="text-muted fs-6">↑↑↓↓←→←→BA</span></h1><h6>CSS & Psychedelic canvas by: <a href="https://codepen.io/injectilo" target="_blank">injectilo</a></h6>
            </div>
            </div>



            <script>
                "use strict";
                let konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'B', 'A'];
                let current = 0;
                document.addEventListener("keyup", function (event) {
                    if (konamiCode.indexOf(event.key) < 0 || event.key !== konamiCode[current]) {
                        current = -1;
                        console.log(event.key);
                        console.log(current);
                    }
                    current++;
                    if (current === 10) {
                        console.log(`made it`);
                        let psy = document.getElementById('canvas');
                        psy.style.display = 'block'
                        let hide = document.getElementById('hideController');
                        hide.style.display = 'none'
                    }
                });

                var canvas = document.getElementById("canvas");
                var ctx = canvas.getContext("2d");
                var circles = [];
                var mX = 0;
                var mY = 0;

                function init() {
                    resizeCanvas();
                    setInterval(drawShape,50);
                }

                function resizeCanvas() {
                    canvas.width = window.innerWidth - 5;
                    canvas.height = window.innerHeight - 5;
                }

                function randomRange(min,max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }

                function randomColor(){
                    let colors = ["yellow","orange","olive","blue","pink","lime","cyan","red","purple","black","white"];
                    var indexC = randomRange(0,colors.length);
                    return colors[indexC];
                }

                function drawShape() {
                    resizeCanvas();
                    var circle = {
                        x : mX,
                        y : mY,
                        xSpeed : randomRange(-10,10),
                        ySpeed : randomRange(-10,10),
                        size:10,
                        color: randomColor()
                    }

                    circles.push(circle);

                    ctx.clearRect(0,0,canvas.width,canvas.height);
                    for(var i = 0; i< circles.length;i++) {
                        circle = circles[i];
                        ctx.beginPath();
                        ctx.fillStyle = circle.color;
                        ctx.arc(circle.x,circle.y,circle.size,0*Math.PI,Math.PI * 2);
                        //ctx.stroke();
                        ctx.fill();
                        ctx.closePath();

                        circle.y = circle.y + circle.ySpeed
                        circle.x = circle.x + circle.xSpeed;

                        if (circle.size < 700) {
                            circle.size = circle.size  * 1.2;
                        }
                    }
                }

                window.addEventListener("mousemove", function(event){
                    mX = event.clientX;
                    mY = event.clientY;
                })

                init();

                //Simulating keyboard events (accessibility / make NES buttons)
                let fakeArrowUp = document.getElementById('fakeArrowUp')

                fakeArrowUp.addEventListener("click", arrowUp)

                function arrowUp() {
                    document.dispatchEvent(fakeArrowUpEvent)
                }
                let fakeArrowUpEvent = new KeyboardEvent('keyup', {
                    'key': 'ArrowUp'
                })


                let fakeArrowDown = document.getElementById('fakeArrowDown')

                fakeArrowDown.addEventListener("click", arrowDown)

                function arrowDown() {
                    document.dispatchEvent(fakeArrowDownEvent)
                }
                let fakeArrowDownEvent = new KeyboardEvent('keyup', {
                    'key': 'ArrowDown'
                })


                let fakeArrowLeft = document.getElementById('fakeArrowLeft')

                fakeArrowLeft.addEventListener("click", arrowLeft)

                function arrowLeft() {
                    document.dispatchEvent(fakeArrowLeftEvent)
                }
                let fakeArrowLeftEvent = new KeyboardEvent('keyup', {
                    'key': 'ArrowLeft'
                })


                let fakeArrowRight = document.getElementById('fakeArrowRight')

                fakeArrowRight.addEventListener("click", arrowRight)

                function arrowRight() {
                    document.dispatchEvent(fakeArrowRightEvent)
                }
                let fakeArrowRightEvent = new KeyboardEvent('keyup', {
                    'key': 'ArrowRight'
                })


                let fakeAkey = document.getElementById('fakeA')

                fakeAkey.addEventListener("click", Akey)

                function Akey() {
                    document.dispatchEvent(fakeAEvent)
                }
                let fakeAEvent = new KeyboardEvent('keyup', {
                    'key': 'A'
                })

                let fakeB = document.getElementById('fakeB')

                fakeB.addEventListener("click", B)

                function B () {
                    document.dispatchEvent(fakeBEvent)
                }
                let fakeBEvent = new KeyboardEvent('keyup', {
                    'key': 'B'
                })



            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                    crossorigin="anonymous">
            </script>
        </div>
    </body>
</html>